function checkMilestones() {
    const badge = document.getElementById('badge');
    const count = questState.filter(t => t.completed).length;
    const total = questState.length;
    if (total === 0) return;

    let currentProgress = count / total;
    let emoji = "";

    // Logik: Nur triggern, wenn Schwelle erreicht UND noch nicht gefeiert
    if (currentProgress === 1 && !achievedMilestones.m100) {
        emoji = "ðŸ†";
        achievedMilestones.m100 = true;
    } 
    else if (currentProgress >= 0.8 && currentProgress < 1 && !achievedMilestones.m80) {
        emoji = "ðŸ¥‡";
        achievedMilestones.m80 = true;
    } 
    else if (currentProgress >= 0.5 && currentProgress < 0.8 && !achievedMilestones.m50) {
        emoji = "ðŸ¥ˆ";
        achievedMilestones.m50 = true;
    }

    // Wenn eine Aufgabe wieder abgewÃ¤hlt wird, Meilenstein zurÃ¼cksetzen
    if (currentProgress < 1) achievedMilestones.m100 = false;
    if (currentProgress < 0.8) achievedMilestones.m80 = false;
    if (currentProgress < 0.5) achievedMilestones.m50 = false;

    if (emoji !== "") {
        badge.innerText = emoji;
        badge.classList.add('show');
        setTimeout(() => badge.classList.remove('show'), 2500);
    }
}
